# урок 7 — перевод денег

перевод должен быть атомарным:
либо списание и зачисление вместе, либо ничего.

begin/commit делает операции единым блоком.
rollback отменяет изменения.

for update блокирует выбранные строки accounts,
чтобы параллельные переводы не привели к гонкам.

check (balance_cents >= 0) — последний рубеж защиты от минуса.
история операций хранится в transactions.
